{% extends "layout.html" %}
{% block content %}

<div class="fade-in">

    <h2 class="text-4xl font-bold mb-4 tracking-tight">
        Browse Sacred Texts
    </h2>

    <p class="text-gray-500 mb-8">
        {{ total }} result(s) found
    </p>

    <!-- FILTER BAR -->
    <form method="get" class="flex flex-wrap gap-4 mb-12">

        <input type="text" name="q"
               placeholder="Search title..."
               value="{{ q or '' }}"
               class="border border-gray-200 px-4 py-3 rounded-xl w-64 focus:ring-2 focus:ring-indigo-500 focus:outline-none">

        <select name="language"
                class="border border-gray-200 px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none">
            <option value="">All Languages</option>
            <option value="Sanskrit" {% if language == "Sanskrit" %}selected{% endif %}>Sanskrit</option>
        </select>

        <select name="category"
                class="border border-gray-200 px-4 py-3 rounded-xl focus:ring-2 focus:ring-indigo-500 focus:outline-none">
            <option value="">All Categories</option>
            <option value="Stotra" {% if category == "Stotra" %}selected{% endif %}>Stotra</option>
            <option value="Scripture" {% if category == "Scripture" %}selected{% endif %}>Scripture</option>
        </select>

        <button class="bg-indigo-600 text-white px-6 py-3 rounded-xl hover:bg-indigo-700 transition shadow-sm">
            Apply
        </button>
    </form>

    {% if docs %}

    <!-- DOCUMENT GRID -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12">

        {% for doc in docs %}
        <div class="bg-white rounded-2xl p-6 shadow-sm hover:shadow-xl transition duration-300 border border-gray-100">

            <a href="/document/{{ doc.slug }}"
               class="text-xl font-semibold text-gray-800 hover:text-indigo-600 transition">
                {{ doc.title }}
            </a>

            <p class="text-gray-500 mt-3">
                {{ doc.language }}
            </p>

            <p class="text-sm text-gray-400">
                {{ doc.category }}
            </p>

            <div class="mt-6">
                <span class="text-indigo-600 text-sm font-medium">
                    Read â†’
                </span>
            </div>

        </div>
        {% endfor %}

    </div>

    <!-- PAGINATION -->
    <div class="flex justify-center gap-2">

        {% for p in range(1, total_pages + 1) %}
        <a href="?page={{ p }}{% if q %}&q={{ q }}{% endif %}{% if language %}&language={{ language }}{% endif %}{% if category %}&category={{ category }}{% endif %}"
           class="px-4 py-2 rounded-lg border
                  {% if p == page %}
                  bg-indigo-600 text-white border-indigo-600
                  {% else %}
                  bg-white text-gray-700 border-gray-200 hover:bg-gray-100
                  {% endif %}
                  transition">
            {{ p }}
        </a>
        {% endfor %}

    </div>

    {% else %}

    <!-- EMPTY STATE -->
    <div class="text-center py-20">
        <h3 class="text-xl font-semibold text-gray-700">No results found</h3>
        <p class="text-gray-500 mt-2">Try adjusting your filters.</p>
    </div>

    {% endif %}

</div>

{% endblock %}